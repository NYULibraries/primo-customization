(function(a){typeof define=="function"&&define.amd?define(a):a()})(function(){"use strict";var C=Object.defineProperty;var f=(a,n,c)=>n in a?C(a,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[n]=c;var u=(a,n,c)=>(f(a,typeof n!="symbol"?n+"":n,c),c);const a="",n="click",c="keydown",m="Space",b="Enter";function y(o){if(o.type===n)return!0;if(o.type===c){const t=o.key||o.code;if(t===m||t===b)return!0}return!1}class p{constructor(t=typeof global<"u"?global.document:window.document){this.document=t,this.selector=this.document.querySelectorAll(".nyulibraries-chatwidget-js-toggle"),this.triggerOnEvents=[n,c],this.visibleClass="nyulibraries-chat-frame-wrap",this.linkSelectorClass="nyulibraries-chatwidget-js-toggle",this.chatWidgetFocusSelector="#nyulibraries_chat_widget"}run(){const t=this;t.selector.forEach(e=>{t.triggerOnEvents.forEach(s=>{e.addEventListener(s,function(i){y(i)&&(i.preventDefault(),t.document.body.classList.toggle(t.visibleClass),t.document.body.classList.contains(t.linkSelectorClass)&&t.document.body.classList.contains(t.visibleClass)&&t.document.querySelector(t.chatWidgetFocusSelector).focus())})})})}}class g{constructor(t=typeof global<"u"?global.document:window.document){u(this,"handleChatToggle",()=>{this.showChat=!this.showChat;const t=document.querySelector(".nyulibraries-chat-frame-wrap"),e=document.querySelector(".nyulibraries-chat-button");t&&(t.style.display=this.showChat?"block":"none"),e&&(e.style.display=this.showChat?"none":"block"),this.showChat&&t&&t.querySelector(".nyulibraries-chat-close").focus()});u(this,"renderChatWidget",()=>{const t=document.querySelector(".nyulibraries-chat-container");t.id="nyulibraries_chat_widget",t.innerHTML="";const e=document.createElement("button");e.className="button ss-chat nyulibraries-chat-button",e.onclick=this.handleChatToggle,e.id="chat-button";const s=document.createElement("img");s.src=this.getImgSrcUrl(),s.alt="Chat-Symbol.",s.className="nyulibraries-chat-icon",e.appendChild(s),e.appendChild(document.createTextNode("Chat with us")),t.appendChild(e);const i=document.createElement("div");i.className="nyulibraries-chat-frame-wrap",i.style.display="none";const r=document.createElement("button");r.className="nyulibraries-chat-close ss-icon nyulibraries-chatwidget-js-toggle",r.title="Close chat window",r.setAttribute("aria-label","Close chat window"),r.onclick=this.handleChatToggle;const d=document.createElement("span");d.className="nyulibraries-close-icon",d.textContent="Ã—",r.appendChild(d);const l=document.createElement("div");l.className="libraryh3lp",l.setAttribute("data-lh3-jid","nyu-aal-chat@chat.libraryh3lp.com");const h=document.createElement("iframe");h.title="Ask a Librarian chat",h.src="https://libraryh3lp.com/chat/nyu-aal-chat@chat.libraryh3lp.com?skin=23106&amp;referer=https%3A%2F%2Flibrary.nyu.edu%2F",l.appendChild(h),i.appendChild(r),i.appendChild(l),t.appendChild(i)});this.showChat=!1,this.document=t}init(){new p().run();const t=document.body,e=document.createElement("div");e.className="nyulibraries-chat-container",t.appendChild(e),this.renderChatWidget()}getImgSrcUrl(){switch("production"){case"production":return"https://cdn.library.nyu.edu/chatwidget-embed/chat-icon.svg";case"staging":return"https://cdn-dev.library.nyu.edu/chatwidget-embed/chat-icon.svg";default:return"/chat-icon.svg"}}}new g().init()});
//# sourceMappingURL=index.min.js.map
