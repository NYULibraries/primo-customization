var u=Object.defineProperty;var m=(c,e,s)=>e in c?u(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s;var r=(c,e,s)=>(m(c,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();const d="click",h="keydown",y="Space",p="Enter";function b(c){if(c.type===d)return!0;if(c.type===h){const e=c.key||c.code;if(e===y||e===p)return!0}return!1}class f{constructor(e=typeof global<"u"?global.document:window.document){this.document=e,this.selector=this.document.querySelectorAll(".nyulibraries-chatwidget-js-toggle"),this.triggerOnEvents=[d,h],this.visibleClass="nyulibraries-chat-frame-wrap",this.linkSelectorClass="nyulibraries-chatwidget-js-toggle",this.chatWidgetFocusSelector="#nyulibraries_chat_widget"}run(){const e=this;e.selector.forEach(s=>{e.triggerOnEvents.forEach(i=>{s.addEventListener(i,function(t){b(t)&&(t.preventDefault(),e.document.body.classList.toggle(e.visibleClass),e.document.body.classList.contains(e.linkSelectorClass)&&e.document.body.classList.contains(e.visibleClass)&&e.document.querySelector(e.chatWidgetFocusSelector).focus())})})})}}class g{constructor(e=typeof global<"u"?global.document:window.document){r(this,"handleChatToggle",()=>{this.showChat=!this.showChat;const e=document.querySelector(".nyulibraries-chat-frame-wrap"),s=document.querySelector(".nyulibraries-chat-button");e&&(e.style.display=this.showChat?"block":"none"),s&&(s.style.display=this.showChat?"none":"block"),this.showChat&&e&&e.querySelector(".nyulibraries-chat-close").focus()});r(this,"imgPath","../../../custom/01_embeds/chatwidget-embed/chat-icon.svg");r(this,"renderChatWidget",()=>{const e=document.querySelector(".nyulibraries-chat-container");e.id="nyulibraries_chat_widget",e.innerHTML="";const s=document.createElement("button");s.className="button ss-chat nyulibraries-chat-button",s.onclick=this.handleChatToggle,s.id="chat-button";const i=document.createElement("img");i.src=this.imgPath,i.alt="Chat-Symbol.",i.className="nyulibraries-chat-icon",s.appendChild(i),s.appendChild(document.createTextNode("Chat with us")),e.appendChild(s);const t=document.createElement("div");t.className="nyulibraries-chat-frame-wrap",t.style.display="none";const n=document.createElement("button");n.className="nyulibraries-chat-close ss-icon nyulibraries-chatwidget-js-toggle",n.title="Close chat window",n.setAttribute("aria-label","Close chat window"),n.onclick=this.handleChatToggle;const o=document.createElement("span");o.className="nyulibraries-close-icon",o.textContent="Ã—",n.appendChild(o);const a=document.createElement("div");a.className="libraryh3lp",a.setAttribute("data-lh3-jid","nyu-aal-chat@chat.libraryh3lp.com");const l=document.createElement("iframe");l.title="Ask a Librarian chat",l.src="https://libraryh3lp.com/chat/nyu-aal-chat@chat.libraryh3lp.com?skin=23106&amp;referer=https%3A%2F%2Flibrary.nyu.edu%2F",a.appendChild(l),t.appendChild(n),t.appendChild(a),e.appendChild(t)});this.showChat=!1,this.document=e}loadStylesheet(){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="../../../custom/01_embeds/chatwidget-embed/index.min.css",document.head.appendChild(e)}init(){this.loadStylesheet(),new f().run();const e=document.body,s=document.createElement("div");s.className="nyulibraries-chat-container",e.appendChild(s),this.renderChatWidget()}}new g().init();
//# sourceMappingURL=index.min.js.map
