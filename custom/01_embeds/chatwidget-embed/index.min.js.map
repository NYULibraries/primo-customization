{"version":3,"file":"index.min.js","sources":["../AskALibrarianWidget.js","../ChatWidget.js","../main.js"],"sourcesContent":["const CLICK_EVENT = 'click';\nconst KEYDOWN_EVENT = 'keydown';\nconst SPACE_KEY = 'Space';\nconst ENTER_KEY = 'Enter';\n\nfunction accessibleSelect(event) {\n    if (event.type === CLICK_EVENT) {\n        return true;\n    } else if (event.type === KEYDOWN_EVENT) {\n        const code = event.key || event.code;\n        if (code === SPACE_KEY || code === ENTER_KEY) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport default class AskALibrarianWidget {\n    constructor(document = (typeof global !== 'undefined' ? global.document : window.document)) {\n        this.document = document;\n        this.selector = this.document.querySelectorAll('.nyulibraries-chatwidget-js-toggle');\n        this.triggerOnEvents = [CLICK_EVENT, KEYDOWN_EVENT];\n        this.visibleClass = 'nyulibraries-chat-frame-wrap';\n        this.linkSelectorClass = 'nyulibraries-chatwidget-js-toggle';\n        this.chatWidgetFocusSelector = '#nyulibraries_chat_widget';\n    }\n\n    run() {\n        const obj = this;\n        obj.selector.forEach(link => {\n            obj.triggerOnEvents.forEach(event => {\n                link.addEventListener(event, function (event) {\n                    if (accessibleSelect(event)) {\n                        event.preventDefault();\n                        obj.document.body.classList.toggle(obj.visibleClass);\n                        if (obj.document.body.classList.contains(obj.linkSelectorClass) && obj.document.body.classList.contains(obj.visibleClass)) {\n                            obj.document.querySelector(obj.chatWidgetFocusSelector).focus();\n                        }\n                    }\n                });\n            });\n        });\n    }\n}\n\n\n\n\n\n","import AskALibrarianWidget from './AskALibrarianWidget';\n\nexport class ChatWidget {\n    constructor(document = (typeof global !== 'undefined' ? global.document : window.document)) {\n        this.showChat = false;\n        this.document = document;\n    }\n\n    loadStylesheet() {\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.href = '../../../custom/01_embeds/chatwidget-embed/index.min.css';\n        document.head.appendChild(link);\n    }\n\n    init() {\n        this.loadStylesheet();\n        new AskALibrarianWidget().run();\n        const app = document.body;\n        const chatContainer = document.createElement('div');\n        chatContainer.className = 'nyulibraries-chat-container';\n        app.appendChild(chatContainer);\n        this.renderChatWidget();\n    }\n\n    handleChatToggle = () => {\n        this.showChat = !this.showChat;\n        const chatFrameWrap = document.querySelector('.nyulibraries-chat-frame-wrap');\n        const chatButton = document.querySelector('.nyulibraries-chat-button');\n\n        if (chatFrameWrap) {\n            chatFrameWrap.style.display = this.showChat ? 'block' : 'none';  // Toggle chat frame visibility\n        }\n\n        if (chatButton) {\n            chatButton.style.display = !this.showChat ? 'block' : 'none';  // Toggle chat button visibility\n        }\n\n        if (this.showChat && chatFrameWrap) {\n            const closeButton = chatFrameWrap.querySelector('.nyulibraries-chat-close');\n            closeButton.focus();\n        }\n    };\n\n\n\n    imgPath = '../../../custom/01_embeds/chatwidget-embed/chat-icon.svg';\n\n\n    renderChatWidget = () => {\n        const chatContainer = document.querySelector('.nyulibraries-chat-container');\n        chatContainer.id = 'nyulibraries_chat_widget';\n        chatContainer.innerHTML = '';\n\n\n        const button = document.createElement('button');\n        button.className = 'button ss-chat nyulibraries-chat-button';\n        button.onclick = this.handleChatToggle;\n        button.id = 'chat-button';\n\n        const img = document.createElement('img');\n        img.src = this.imgPath;\n        img.alt = 'Chat-Symbol.';\n        img.className = 'nyulibraries-chat-icon';\n\n        button.appendChild(img);\n        button.appendChild(document.createTextNode('Chat with us'));\n\n        chatContainer.appendChild(button);\n\n        // Chat frame (initially hidden)\n        const chatFrameWrap = document.createElement('div');\n        chatFrameWrap.className = 'nyulibraries-chat-frame-wrap';\n        chatFrameWrap.style.display = 'none';  // Initially hidden\n\n        const closeButton = document.createElement('button');\n        closeButton.className = 'nyulibraries-chat-close ss-icon nyulibraries-chatwidget-js-toggle';\n        closeButton.title = 'Close chat window';\n        closeButton.setAttribute('aria-label', 'Close chat window');\n        closeButton.onclick = this.handleChatToggle;\n\n        const closeIcon = document.createElement('span');\n        closeIcon.className = 'nyulibraries-close-icon';\n        closeIcon.textContent = '\\u00D7';\n\n        closeButton.appendChild(closeIcon);\n\n        const libraryh3lpDiv = document.createElement('div');\n        libraryh3lpDiv.className = 'libraryh3lp';\n        libraryh3lpDiv.setAttribute('data-lh3-jid', 'nyu-aal-chat@chat.libraryh3lp.com');\n\n        const iframe = document.createElement('iframe');\n        iframe.title = 'Ask a Librarian chat';\n        iframe.src = 'https://libraryh3lp.com/chat/nyu-aal-chat@chat.libraryh3lp.com?skin=23106&amp;referer=https%3A%2F%2Flibrary.nyu.edu%2F';\n\n        libraryh3lpDiv.appendChild(iframe);\n\n        chatFrameWrap.appendChild(closeButton);\n        chatFrameWrap.appendChild(libraryh3lpDiv);\n\n        chatContainer.appendChild(chatFrameWrap);\n\n    }\n};\n\n\n\n","import './ChatWidget.css';\n\nimport { ChatWidget } from './ChatWidget.js';\n\n(new ChatWidget()).init();\n\n"],"names":["CLICK_EVENT","KEYDOWN_EVENT","SPACE_KEY","ENTER_KEY","accessibleSelect","event","code","AskALibrarianWidget","document","obj","link","ChatWidget","__publicField","chatFrameWrap","chatButton","chatContainer","button","img","closeButton","closeIcon","libraryh3lpDiv","iframe","app"],"mappings":"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"}