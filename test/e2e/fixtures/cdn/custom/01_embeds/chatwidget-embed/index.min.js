(function(a){typeof define=="function"&&define.amd?define(a):a()})(function(){"use strict";var C=Object.defineProperty;var f=(a,n,i)=>n in a?C(a,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[n]=i;var h=(a,n,i)=>(f(a,typeof n!="symbol"?n+"":n,i),i);const a="",n="click",i="keydown",m="Space",b="Enter";function y(o){if(o.type===n)return!0;if(o.type===i){const t=o.key||o.code;if(t===m||t===b)return!0}return!1}class g{constructor(t=typeof global<"u"?global.document:window.document){this.document=t,this.selector=this.document.querySelectorAll(".nyulibraries-chatwidget-js-toggle, .nyulibraries-chatwidget-js-toggle-from-link"),this.triggerOnEvents=[n,i],this.visibleClass="showing-chat-frame",this.linkSelectorClass="nyulibraries-chatwidget-js-toggle-from-link",this.chatWidgetFocusSelector="#chat_widget"}run(){const t=this;t.selector.forEach(e=>{t.triggerOnEvents.forEach(s=>{e.addEventListener(s,function(c){y(c)&&(c.preventDefault(),t.document.body.classList.toggle(t.visibleClass),this.classList.contains(t.linkSelectorClass)&&t.document.body.classList.contains(t.visibleClass)&&t.document.querySelector(t.chatWidgetFocusSelector).focus())})})})}}class p{constructor(t=typeof global<"u"?global.document:window.document){h(this,"handleChatToggle",()=>{this.showChat=!this.showChat;const t=document.querySelector(".nyulibraries-chat-frame-wrap"),e=document.querySelector(".nyulibraries-chat-button");t&&(t.style.display=this.showChat?"block":"none"),e&&(e.style.display=this.showChat?"none":"block"),this.showChat&&t&&t.querySelector(".nyulibraries-chat-close").focus()});h(this,"imgPath","../../../../../custom/01_embeds/chatwidget-embed/chat-icon.svg");h(this,"renderChatWidget",()=>{const t=document.querySelector(".nyulibraries-chat-container");t.id="nyulibraries_chat_widget",t.innerHTML="";const e=document.createElement("button");e.className="button ss-chat nyulibraries-chat-button",e.onclick=this.handleChatToggle,e.id="chat-button";const s=document.createElement("img");s.src=this.imgPath,s.alt="Chat-Symbol.",s.className="nyulibraries-chat-icon",e.appendChild(s),e.appendChild(document.createTextNode("Chat with us")),t.appendChild(e);const c=document.createElement("div");c.className="nyulibraries-chat-frame-wrap",c.style.display="none";const l=document.createElement("button");l.className="nyulibraries-chat-close ss-icon nyulibraries-chatwidget-js-toggle",l.title="Close chat window",l.setAttribute("aria-label","Close chat window"),l.onclick=this.handleChatToggle;const d=document.createElement("span");d.className="nyulibraries-close-icon",d.textContent="Ã—",l.appendChild(d);const r=document.createElement("div");r.className="libraryh3lp",r.setAttribute("data-lh3-jid","nyu-aal-chat@chat.libraryh3lp.com");const u=document.createElement("iframe");u.title="Ask a Librarian chat",u.src="https://libraryh3lp.com/chat/nyu-aal-chat@chat.libraryh3lp.com?skin=23106&amp;referer=https%3A%2F%2Flibrary.nyu.edu%2F",r.appendChild(u),c.appendChild(l),c.appendChild(r),t.appendChild(c)});this.showChat=!1,this.document=t}init(){new g().run();const t=document.body,e=document.createElement("div");e.className="nyulibraries-chat-container",t.appendChild(e),this.renderChatWidget()}}new p().init()});
//# sourceMappingURL=index.min.js.map
